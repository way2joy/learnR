상관분석 (and 편상관분석)
=======================================================

의미 : 선형적 상관관계의 정도를 보는 것

### 실습1 : 모수적 상관분석

1) 허리둘레와 BMI의 산점도를 그린다.

```{r}
setwd("~/SparkleShare/learnR/Rstar/보건의학통계/lesson06")
data <- read.csv("6_correlation_and_regression.csv", header=T)
head(data)
```

```{r fig.width=7, fig.height=6}
# plot
plot(data)
plot(BMI~waistline, data=data)

# corrplot
data.cor <- cor(data)
library(corrplot)
corrplot(data.cor, method='shade', shade.col=NA, tl.col='black', tl.srt=45, order='hclust')
```

2) 허리둘레와 BMI의 상관관계를 분석한다. 

```{r}
data.cor['waistline','BMI']
cor.test(data$waistline, data$BMI)
```

3) 체중의 영향을 고려하여 허리둘레와 BMI의 편상관계수를 구한다. 

```{r}
#install.packages('ppcor')
library('ppcor')
pcor.test(data$waistline, data$BMI, data$weight)
```

### 실습2 : 비모수 상관분석
```{r}
data2 <- read.csv("6_spearman.csv", header=T)
head(data2)

cor.test(data2$Age, data2$SBP, method= "spearman")
cor.test(data2$Age, data2$SBP, method= "kendall")
```


### 실습3 : 단순회귀분석

reference
[1](http://analyticsstory.com/98)

```{r}
data.lm <- lm(data$BMI ~ data$waistline)
summary(data.lm)
```

Call : 회귀분석에 사용된 모델 식입니다.
Residuals: 잔차, 즉 회귀선의 값과 실제 관측 값의 차이를 각 분위수로 표시합니다.
Coefficients: 절편, 독립변수 등에 대한 회귀계수를 표시합니다.
Residual standard error: 잔차의 표준오차와 자유도를 나타냅니다.
Multiple R-squared: 결정계수, 즉 추정된 회귀선이 실제 관측값을 얼마나 잘 설명하는 가를 나타냅니다. 0에서 1사이의 값을 가지며 1은 실제관측 값들이 회귀선 상에 위치함을 의미합니다.
Adjusted R-squared: 수정결정계수, 주로 다중회귀분석에서 독립변수를 증가시키면 결정계수가 올라가는 것에 대한 대안으로 사용합니다.
F-statistic: F통계량은 해당 모형이 의미가 있는지 아닌지를 알려줍니다.계수 중 하나라도 0이 아닌 것이 있다면 그 모형은 유의미하다고 판단합니다.

```{r fig.width=7, fig.height=6}
plot(data$BMI ~ data$waistline)
abline(data.lm)
```


